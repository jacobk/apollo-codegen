{"version":3,"sources":["../src/introspectSchema.js"],"names":["schemaContents","schema","introspect","schemaPath","outputPath","existsSync","readFileSync","toString","result","errors","writeFileSync","introspectSchema"],"mappings":";;;;;;;;;;;;;;;;6CAOO,WAA0BA,cAA1B,EAA0C;AAC/C,UAAMC,SAAS,6BAAe,oBAAMD,cAAN,CAAf,CAAf;AACA,WAAO,MAAM,sBAAQC,MAAR,gCAAb;AACD,G;;kBAHqBC,U;;;;;AAPtB;;;;AAEA;;AACA;;AAEA;;;;;8CAOe,WAAgCC,UAAhC,EAA4CC,UAA5C,EAAwD;AACrE,QAAI,CAAC,aAAGC,UAAH,CAAcF,UAAd,CAAL,EAAgC;AAC9B,YAAM,sBAAe,oCAAmCA,UAAW,EAA7D,CAAN;AACD;;AAED,UAAMH,iBAAiB,aAAGM,YAAH,CAAgBH,UAAhB,EAA4BI,QAA5B,EAAvB;AACA,UAAMC,SAAS,MAAMN,WAAWF,cAAX,CAArB;;AAEA,QAAIQ,OAAOC,MAAX,EAAmB;AACjB,YAAM,sBAAe,yCAAwCD,OAAOC,MAAO,EAArE,CAAN;AACD;;AAED,iBAAGC,aAAH,CAAiBN,UAAjB,EAA6B,yBAAeI,MAAf,EAAuB,IAAvB,EAA6B,CAA7B,CAA7B;AACD,G;;WAb6BG,gB;;;;SAAAA,gB","file":"introspectSchema.js","sourcesContent":["import fs from 'fs';\n\nimport { buildASTSchema, graphql, parse } from 'graphql';\nimport { introspectionQuery } from 'graphql/utilities';\n\nimport { ToolError } from './errors'\n\nexport async function introspect(schemaContents) {\n  const schema = buildASTSchema(parse(schemaContents));\n  return await graphql(schema, introspectionQuery);\n}\n\nexport default async function introspectSchema(schemaPath, outputPath) {\n  if (!fs.existsSync(schemaPath)) {\n    throw new ToolError(`Cannot find GraphQL schema file: ${schemaPath}`);\n  }\n\n  const schemaContents = fs.readFileSync(schemaPath).toString();\n  const result = await introspect(schemaContents);\n\n  if (result.errors) {\n    throw new ToolError(`Errors in introspection query result: ${result.errors}`);\n  }\n\n  fs.writeFileSync(outputPath, JSON.stringify(result, null, 2));\n}\n"]}